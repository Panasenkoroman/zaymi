!function(e){!jQuery&&"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,document,window,navigator)}):jQuery||"object"!=typeof exports?e(jQuery,document,window,navigator):e(require("jquery"),document,window,navigator)}(function(l,c,h,t,d){"use strict";var e,i,s=0,o=(i=/msie\s\d+/i,0<(e=t.userAgent).search(i)&&i.exec(e).toString().split(" ")[1]<9&&(l("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(s){var o=this,n=[].slice;if("function"!=typeof o)throw new TypeError;var r=n.call(arguments,1),a=function(){if(this instanceof a){var t=function(){};t.prototype=o.prototype;var e=new t,i=o.apply(e,r.concat(n.call(arguments)));return Object(i)===i?i:e}return o.apply(s,r.concat(n.call(arguments)))};return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var s=Object(this),o=s.length>>>0;if(0==o)return-1;var n=+e||0;if(Math.abs(n)===1/0&&(n=0),o<=n)return-1;for(i=Math.max(0<=n?n:o-Math.abs(n),0);i<o;){if(i in s&&s[i]===t)return i;i++}return-1});function n(t,e,i){this.VERSION="2.3.0",this.input=t,this.plugin_count=i,this.current_plugin=0,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.old_min_interval=null,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.no_diapason=!1,this.has_tab_index=!0,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,e=e||{},this.$cache={win:l(h),body:l(c.body),input:l(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var s,o,n,r=this.$cache.input,a=r.prop("value");for(n in s={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" — ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null},"INPUT"!==r[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",r[0]),(o={skin:r.data("skin"),type:r.data("type"),min:r.data("min"),max:r.data("max"),from:r.data("from"),to:r.data("to"),step:r.data("step"),min_interval:r.data("minInterval"),max_interval:r.data("maxInterval"),drag_interval:r.data("dragInterval"),values:r.data("values"),from_fixed:r.data("fromFixed"),from_min:r.data("fromMin"),from_max:r.data("fromMax"),from_shadow:r.data("fromShadow"),to_fixed:r.data("toFixed"),to_min:r.data("toMin"),to_max:r.data("toMax"),to_shadow:r.data("toShadow"),prettify_enabled:r.data("prettifyEnabled"),prettify_separator:r.data("prettifySeparator"),force_edges:r.data("forceEdges"),keyboard:r.data("keyboard"),grid:r.data("grid"),grid_margin:r.data("gridMargin"),grid_num:r.data("gridNum"),grid_snap:r.data("gridSnap"),hide_min_max:r.data("hideMinMax"),hide_from_to:r.data("hideFromTo"),prefix:r.data("prefix"),postfix:r.data("postfix"),max_postfix:r.data("maxPostfix"),decorate_both:r.data("decorateBoth"),values_separator:r.data("valuesSeparator"),input_values_separator:r.data("inputValuesSeparator"),disable:r.data("disable"),block:r.data("block"),extra_classes:r.data("extraClasses")}).values=o.values&&o.values.split(","),o)o.hasOwnProperty(n)&&(o[n]!==d&&""!==o[n]||delete o[n]);a!==d&&""!==a&&((a=a.split(o.input_values_separator||e.input_values_separator||";"))[0]&&a[0]==+a[0]&&(a[0]=+a[0]),a[1]&&a[1]==+a[1]&&(a[1]=+a[1]),e&&e.values&&e.values.length?(s.from=a[0]&&e.values.indexOf(a[0]),s.to=a[1]&&e.values.indexOf(a[1])):(s.from=a[0]&&+a[0],s.to=a[1]&&+a[1])),l.extend(s,e),l.extend(s,o),this.options=s,this.update_check={},this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()}n.prototype={init:function(t){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var t='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(t),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents()),this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.min,e=this.options.max,i=this.options.from,s=this.options.to;t<i&&s===e?this.$cache.s_from.addClass("type_last"):s<e&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake),this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask"),this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),o&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),o&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(t){var e,i;this.target||(e=(i="single"===this.options.type?this.$cache.single:this.$cache.from).offset().left,e+=i.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:e}))},pointerMove:function(t){if(this.dragging){var e=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;this.coords.x_pointer=e-this.coords.x_gap,this.calc()}},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,o&&l("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(l.contains(this.$cache.cont[0],t.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===t&&this.setTempMinInterval(),t=t||(this.target||"from"),this.current_plugin=this.plugin_count,this.target=t,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=i-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),o&&l("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var e=this.coords.p_pointer,i=(this.options.max-this.options.min)/100;i=this.options.step/i,t?e+=i:e-=i,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*e),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");if(this.options.values.length)this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]));else{var t=this._prettify(this.options.min),e=this._prettify(this.options.max);this.result.min_pretty=t,this.result.max_pretty=e,this.$cache.min.html(this.decorate(t,this.options.min)),this.$cache.max.html(this.decorate(e,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){if(this.options&&(this.calc_count++,10!==this.calc_count&&!t||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();var e=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,e=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,e=this.getHandleX(),this.options.drag_interval?this.target="both_one":this.target=this.chooseHandle(e)),this.target){case"base":var i=(this.options.max-this.options.min)/100,s=(this.result.from-this.options.min)/i,o=(this.result.to-this.options.min)/i;this.coords.p_single_real=this.toFixed(s),this.coords.p_from_real=this.toFixed(s),this.coords.p_to_real=this.toFixed(o),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(e),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(e),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(e),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;e=this.toFixed(e+.001*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(e)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(e)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var n=this.convertToRealPercent(e),r=this.result.from_percent,a=this.result.to_percent-r,l=a/2,c=n-l,h=n+l;c<0&&(h=(c=0)+a),100<h&&(c=(h=100)-a),this.coords.p_from_real=this.calcWithStep(c),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(h),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,e=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return e<0?e=0:t<e&&(e=t),e},calcHandlePercent:function(){"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2<=t?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%")),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){if(this.options){var t,e,i,s,o,n=this.options.values.length,r=this.options.p_values;if(!this.options.hide_from_to)if("single"===this.options.type)t=n?this.decorate(r[this.result.from]):(s=this._prettify(this.result.from),this.decorate(s,this.result.from)),this.$cache.single.html(t),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible";else{i=n?(this.options.decorate_both?(t=this.decorate(r[this.result.from]),t+=this.options.values_separator,t+=this.decorate(r[this.result.to])):t=this.decorate(r[this.result.from]+this.options.values_separator+r[this.result.to]),e=this.decorate(r[this.result.from]),this.decorate(r[this.result.to])):(s=this._prettify(this.result.from),o=this._prettify(this.result.to),this.options.decorate_both?(t=this.decorate(s,this.result.from),t+=this.options.values_separator,t+=this.decorate(o,this.result.to)):t=this.decorate(s+this.options.values_separator+o,this.result.to),e=this.decorate(s,this.result.from),this.decorate(o,this.result.to)),this.$cache.single.html(t),this.$cache.from.html(e),this.$cache.to.html(i),this.calcLabels();var a=Math.min(this.labels.p_single_left,this.labels.p_from_left),l=this.labels.p_single_left+this.labels.p_single_fake,c=this.labels.p_to_left+this.labels.p_to_fake,h=Math.max(l,c);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",h=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",c):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(l,c))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),a<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",h>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var t,e,i,s,o=this.options,n=this.$cache,r="number"==typeof o.from_min&&!isNaN(o.from_min),a="number"==typeof o.from_max&&!isNaN(o.from_max),l="number"==typeof o.to_min&&!isNaN(o.to_min),c="number"==typeof o.to_max&&!isNaN(o.to_max);"single"===o.type?o.from_shadow&&(r||a)?(t=this.convertToPercent(r?o.from_min:o.min),e=this.convertToPercent(a?o.from_max:o.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,n.shad_single[0].style.display="block",n.shad_single[0].style.left=t+"%",n.shad_single[0].style.width=e+"%"):n.shad_single[0].style.display="none":(o.from_shadow&&(r||a)?(t=this.convertToPercent(r?o.from_min:o.min),e=this.convertToPercent(a?o.from_max:o.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,n.shad_from[0].style.display="block",n.shad_from[0].style.left=t+"%",n.shad_from[0].style.width=e+"%"):n.shad_from[0].style.display="none",o.to_shadow&&(l||c)?(i=this.convertToPercent(l?o.to_min:o.min),s=this.convertToPercent(c?o.to_max:o.max)-i,i=this.toFixed(i-this.coords.p_handle/100*i),s=this.toFixed(s-this.coords.p_handle/100*s),i+=this.coords.p_handle/2,n.shad_to[0].style.display="block",n.shad_to[0].style.left=i+"%",n.shad_to[0].style.width=s+"%"):n.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput(),this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput(),this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput(),this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput(),this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input"),this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex"),this.has_tab_index=!this.has_tab_index},convertToPercent:function(t,e){var i,s=this.options.max-this.options.min,o=s/100;return s?(i=(e?t:t-this.options.min)/o,this.toFixed(i)):(this.no_diapason=!0,0)},convertToValue:function(t){var e,i,s=this.options.min,o=this.options.max,n=s.toString().split(".")[1],r=o.toString().split(".")[1],a=0,l=0;if(0===t)return this.options.min;if(100===t)return this.options.max;n&&(a=e=n.length),r&&(a=i=r.length),e&&i&&(a=i<=e?e:i),s<0&&(s=+(s+(l=Math.abs(s))).toFixed(a),o=+(o+l).toFixed(a));var c,h=(o-s)/100*t+s,d=this.options.step.toString().split(".")[1];return h=d?+h.toFixed(d.length):(h/=this.options.step,+(h*=this.options.step).toFixed(0)),l&&(h-=l),(c=d?+h.toFixed(d.length):this.toFixed(h))<this.options.min?c=this.options.min:c>this.options.max&&(c=this.options.max),c},calcWithStep:function(t){var e=Math.round(t/this.coords.p_step)*this.coords.p_step;return 100<e&&(e=100),100===t&&(e=100),this.toFixed(e)},checkMinInterval:function(t,e,i){var s,o,n=this.options;return n.min_interval?(s=this.convertToValue(t),o=this.convertToValue(e),"from"===i?o-s<n.min_interval&&(s=o-n.min_interval):s-o<n.min_interval&&(s=o+n.min_interval),this.convertToPercent(s)):t},checkMaxInterval:function(t,e,i){var s,o,n=this.options;return n.max_interval?(s=this.convertToValue(t),o=this.convertToValue(e),"from"===i?o-s>n.max_interval&&(s=o-n.max_interval):s-o>n.max_interval&&(s=o+n.max_interval),this.convertToPercent(s)):t},checkDiapason:function(t,e,i){var s=this.convertToValue(t),o=this.options;return"number"!=typeof e&&(e=o.min),"number"!=typeof i&&(i=o.max),s<e&&(s=e),i<s&&(s=i),this.convertToPercent(s)},toFixed:function(t){return+t.toFixed(20)},_prettify:function(t){return this.options.prettify_enabled?this.options.prettify&&"function"==typeof this.options.prettify?this.options.prettify(t):this.prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,e){return this.options.force_edges&&(t<0?t=0:100-e<t&&(t=100-e)),this.toFixed(t)},validate:function(){var t,e,i=this.options,s=this.result,o=i.values,n=o.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<i.min&&(i.max=i.min),n)for(i.p_values=[],i.min=0,i.max=n-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,e=0;e<n;e++)t=+o[e],t=isNaN(t)?o[e]:(o[e]=t,this._prettify(t)),i.p_values.push(t);"number"==typeof i.from&&!isNaN(i.from)||(i.from=i.min),"number"==typeof i.to&&!isNaN(i.to)||(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max),i.to<i.min&&(i.to=i.min),i.to>i.max&&(i.to=i.max),this.update_check.from&&(this.update_check.from!==i.from&&i.from>i.to&&(i.from=i.to),this.update_check.to!==i.to&&i.to<i.from&&(i.to=i.from)),i.from>i.to&&(i.from=i.to),i.to<i.from&&(i.to=i.from)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min),"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max),"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min),"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max),s&&(s.min!==i.min&&(s.min=i.min),s.max!==i.max&&(s.max=i.max),(s.from<s.min||s.from>s.max)&&(s.from=i.from),(s.to<s.min||s.to>s.max)&&(s.to=i.to)),("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0),("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0),i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min),i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(t,e){var i="",s=this.options;return s.prefix&&(i+=s.prefix),i+=t,s.max_postfix&&(s.values.length&&t===s.p_values[s.max]?(i+=s.max_postfix,s.postfix&&(i+=" ")):e===s.max&&(i+=s.max_postfix,s.postfix&&(i+=" "))),s.postfix&&(i+=s.postfix),i},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.result.from_pretty=this._prettify(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.result.to_pretty=this._prettify(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,e,i,s,o,n,r=this.options,a=r.max-r.min,l=r.grid_num,c=0,h=4,d="";for(this.calcGridMargin(),r.grid_snap&&(l=a/r.step),50<l&&(l=50),i=this.toFixed(100/l),4<l&&(h=3),7<l&&(h=2),14<l&&(h=1),28<l&&(h=0),t=0;t<l+1;t++){for(s=h,100<(c=this.toFixed(i*t))&&(c=100),o=((this.coords.big[t]=c)-i*(t-1))/(s+1),e=1;e<=s&&0!==c;e++)d+='<span class="irs-grid-pol small" style="left: '+this.toFixed(c-o*e)+'%"></span>';d+='<span class="irs-grid-pol" style="left: '+c+'%"></span>',n=this.convertToValue(c),d+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+c+'%">'+(n=r.values.length?r.p_values[n]:this._prettify(n))+"</span>"}this.coords.big_num=Math.ceil(l+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(d),this.cacheGridLabels()}},cacheGridLabels:function(){var t,e,i=this.coords.big_num;for(e=0;e<i;e++)t=this.$cache.grid.find(".js-grid-text-"+e),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){var t,e,i=[],s=[],o=this.coords.big_num;for(t=0;t<o;t++)this.coords.big_w[t]=this.$cache.grid_labels[t].outerWidth(!1),this.coords.big_p[t]=this.toFixed(this.coords.big_w[t]/this.coords.w_rs*100),this.coords.big_x[t]=this.toFixed(this.coords.big_p[t]/2),i[t]=this.toFixed(this.coords.big[t]-this.coords.big_x[t]),s[t]=this.toFixed(i[t]+this.coords.big_p[t]);for(this.options.force_edges&&(i[0]<-this.coords.grid_gap&&(i[0]=-this.coords.grid_gap,s[0]=this.toFixed(i[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),s[o-1]>100+this.coords.grid_gap&&(s[o-1]=100+this.coords.grid_gap,i[o-1]=this.toFixed(s[o-1]-this.coords.big_p[o-1]),this.coords.big_x[o-1]=this.toFixed(this.coords.big_p[o-1]-this.coords.grid_gap))),this.calcGridCollision(2,i,s),this.calcGridCollision(4,i,s),t=0;t<o;t++)e=this.$cache.grid_labels[t][0],this.coords.big_x[t]!==Number.POSITIVE_INFINITY&&(e.style.marginLeft=-this.coords.big_x[t]+"%")},calcGridCollision:function(t,e,i){var s,o,n,r=this.coords.big_num;for(s=0;s<r&&!(r<=(o=s+t/2));s+=t)n=this.$cache.grid_labels[o][0],i[s]<=e[o]?n.style.visibility="visible":n.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=l.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),l.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}},l.fn.ionRangeSlider=function(t){return this.each(function(){l.data(this,"ionRangeSlider")||l.data(this,"ionRangeSlider",new n(this,t,s++))})},function(){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!h.requestAnimationFrame;++e)h.requestAnimationFrame=h[t[e]+"RequestAnimationFrame"],h.cancelAnimationFrame=h[t[e]+"CancelAnimationFrame"]||h[t[e]+"CancelRequestAnimationFrame"];h.requestAnimationFrame||(h.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),s=Math.max(0,16-(i-n)),o=h.setTimeout(function(){t(i+s)},s);return n=i+s,o}),h.cancelAnimationFrame||(h.cancelAnimationFrame=function(t){clearTimeout(t)})}()}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t($||require("jquery")):t(jQuery)}(function(N){"use strict";var o="styler",s={idSuffix:"-styler",filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",fileNumber:"Выбрано файлов: %s",selectPlaceholder:"Выберите...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",selectVisibleOptions:0,selectSmartPositioning:!0,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function n(t,e){this.element=t,this.options=N.extend({},s,e);var i=this.options.locale;void 0!==this.options.locales[i]&&N.extend(this.options,this.options.locales[i]),this.init()}function M(t){if(!N(t.target).parents().hasClass("jq-selectbox")&&"OPTION"!=t.target.nodeName&&N("div.jq-selectbox.opened").length){var e=N("div.jq-selectbox.opened"),i=N("div.jq-selectbox__search input",e),s=N("div.jq-selectbox__dropdown",e);e.find("select").data("_"+o).options.onSelectClosed.call(e),i.length&&i.val("").keyup(),s.hide().find("li.sel").addClass("selected"),e.removeClass("focused opened dropup dropdown")}}n.prototype={init:function(){var P=N(this.element),q=this.options,j=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),t=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i));function A(){void 0!==P.attr("id")&&""!==P.attr("id")&&(this.id=P.attr("id")+q.idSuffix),this.title=P.attr("title"),this.classes=P.attr("class"),this.data=P.data()}if(P.is(":checkbox")){var e=function(){var t=new A,e=N('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e).prependTo(e),P.is(":checked")&&e.addClass("checked"),P.is(":disabled")&&e.addClass("disabled"),e.click(function(t){t.preventDefault(),P.triggerHandler("click"),e.is(".disabled")||(P.is(":checked")?(P.prop("checked",!1),e.removeClass("checked")):(P.prop("checked",!0),e.addClass("checked")),P.focus().change())}),P.closest("label").add('label[for="'+P.attr("id")+'"]').on("click.styler",function(t){N(t.target).is("a")||N(t.target).closest(e).length||(e.triggerHandler("click"),t.preventDefault())}),P.on("change.styler",function(){P.is(":checked")?e.addClass("checked"):e.removeClass("checked")}).on("keydown.styler",function(t){32==t.which&&e.click()}).on("focus.styler",function(){e.is(".disabled")||e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")})};e(),P.on("refresh",function(){P.closest("label").add('label[for="'+P.attr("id")+'"]').off(".styler"),P.off(".styler").parent().before(P).remove(),e()})}else if(P.is(":radio")){var i=function(){var t=new A,i=N('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(i).prependTo(i),P.is(":checked")&&i.addClass("checked"),P.is(":disabled")&&i.addClass("disabled"),N.fn.commonParents=function(){var t=this;return t.first().parents().filter(function(){return N(this).find(t).length===t.length})},N.fn.commonParent=function(){return N(this).commonParents().first()},i.click(function(t){if(t.preventDefault(),P.triggerHandler("click"),!i.is(".disabled")){var e=N('input[name="'+P.attr("name")+'"]');e.commonParent().find(e).prop("checked",!1).parent().removeClass("checked"),P.prop("checked",!0).parent().addClass("checked"),P.focus().change()}}),P.closest("label").add('label[for="'+P.attr("id")+'"]').on("click.styler",function(t){N(t.target).is("a")||N(t.target).closest(i).length||(i.triggerHandler("click"),t.preventDefault())}),P.on("change.styler",function(){P.parent().addClass("checked")}).on("focus.styler",function(){i.is(".disabled")||i.addClass("focused")}).on("blur.styler",function(){i.removeClass("focused")})};i(),P.on("refresh",function(){P.closest("label").add('label[for="'+P.attr("id")+'"]').off(".styler"),P.off(".styler").parent().before(P).remove(),i()})}else if(P.is(":file")){var s=function(){var t=new A,s=P.data("placeholder");void 0===s&&(s=q.filePlaceholder);var e=P.data("browse");void 0!==e&&""!==e||(e=q.fileBrowse);var o=N('<div class="jq-file"><div class="jq-file__name">'+s+'</div><div class="jq-file__browse">'+e+"</div></div>").attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(o).appendTo(o),P.is(":disabled")&&o.addClass("disabled");var i=P.val(),n=N("div.jq-file__name",o);i&&n.text(i.replace(/.+[\\\/]/,"")),P.on("change.styler",function(){var t=P.val();if(P.is("[multiple]")){t="";var e=P[0].files.length;if(0<e){var i=P.data("number");void 0===i&&(i=q.fileNumber),t=i=i.replace("%s",e)}}n.text(t.replace(/.+[\\\/]/,"")),""===t?(n.text(s),o.removeClass("changed")):o.addClass("changed")}).on("focus.styler",function(){o.addClass("focused")}).on("blur.styler",function(){o.removeClass("focused")}).on("click.styler",function(){o.removeClass("focused")})};s(),P.on("refresh",function(){P.off(".styler").parent().before(P).remove(),s()})}else if(P.is('input[type="number"]')){var o=function(){var t=new A,e=N('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e).prependTo(e).wrap('<div class="jq-number__field"></div>'),P.is(":disabled")&&e.addClass("disabled");var n,r,a,i=null,s=null;void 0!==P.attr("min")&&(n=P.attr("min")),void 0!==P.attr("max")&&(r=P.attr("max")),a=void 0!==P.attr("step")&&N.isNumeric(P.attr("step"))?Number(P.attr("step")):Number(1);function o(t){var e,i=P.val();N.isNumeric(i)||(i=0,P.val("0")),t.is(".minus")?e=Number(i)-a:t.is(".plus")&&(e=Number(i)+a);var s=(a.toString().split(".")[1]||[]).length;if(0<s){for(var o="1";o.length<=s;)o+="0";e=Math.round(e*o)/o}N.isNumeric(n)&&N.isNumeric(r)?n<=e&&e<=r&&P.val(e):N.isNumeric(n)&&!N.isNumeric(r)?n<=e&&P.val(e):!N.isNumeric(n)&&N.isNumeric(r)?e<=r&&P.val(e):P.val(e)}e.is(".disabled")||(e.on("mousedown","div.jq-number__spin",function(){var t=N(this);o(t),i=setTimeout(function(){s=setInterval(function(){o(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(i),clearInterval(s)}).on("mouseup","div.jq-number__spin",function(){P.change().trigger("input")}),P.on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}))};o(),P.on("refresh",function(){P.off(".styler").closest(".jq-number").before(P).remove(),o()})}else if(P.is("select")){var n=function(){function F(e){var i=e.prop("scrollHeight")-e.outerHeight(),s=null,o=null;e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(t){s=t.originalEvent.detail<0||0<t.originalEvent.wheelDelta?1:-1,o=e.scrollTop(),(i<=o&&s<0||o<=0&&0<s)&&(t.stopPropagation(),t.preventDefault())})}var T=N("option",P),I="";function D(){for(var t=0;t<T.length;t++){var e=T.eq(t),i="",s="",o="",n="",r="",a="",l="",c="",h="";e.prop("selected")&&(s="selected sel"),e.is(":disabled")&&(s="disabled"),e.is(":selected:disabled")&&(s="selected sel disabled"),void 0!==e.attr("id")&&""!==e.attr("id")&&(n=' id="'+e.attr("id")+q.idSuffix+'"'),void 0!==e.attr("title")&&""!==T.attr("title")&&(r=' title="'+e.attr("title")+'"'),void 0!==e.attr("class")&&(l=" "+e.attr("class"),h=' data-jqfs-class="'+e.attr("class")+'"');var d=e.data();for(var p in d)""!==d[p]&&(a+=" data-"+p+'="'+d[p]+'"');s+l!==""&&(o=' class="'+s+l+'"'),i="<li"+h+a+o+r+n+">"+e.html()+"</li>",e.parent().is("optgroup")&&(void 0!==e.parent().attr("class")&&(c=" "+e.parent().attr("class")),i="<li"+h+a+' class="'+s+l+" option"+c+'"'+r+n+">"+e.html()+"</li>",e.is(":first-child")&&(i='<li class="optgroup'+c+'">'+e.parent().attr("label")+"</li>"+i)),I+=i}}if(P.is("[multiple]")){if(t||j)return;!function(){var t=new A,e=N('<div class="jq-select-multiple jqselect"></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(e),D(),e.append("<ul>"+I+"</ul>");var i=N("ul",e),o=N("li",e),s=P.attr("size"),n=i.outerHeight(),r=o.outerHeight();void 0!==s&&0<s?i.css({height:r*s}):i.css({height:4*r}),n>e.height()&&(i.css("overflowY","scroll"),F(i),o.filter(".selected").length&&i.scrollTop(i.scrollTop()+o.filter(".selected").position().top)),P.prependTo(e),P.is(":disabled")?(e.addClass("disabled"),T.each(function(){N(this).is(":selected")&&o.eq(N(this).index()).addClass("selected")})):(o.filter(":not(.disabled):not(.optgroup)").click(function(t){P.focus();var e=N(this);if(t.ctrlKey||t.metaKey||e.addClass("selected"),t.shiftKey||e.addClass("first"),t.ctrlKey||t.metaKey||t.shiftKey||e.siblings().removeClass("selected first"),(t.ctrlKey||t.metaKey)&&(e.is(".selected")?e.removeClass("selected first"):e.addClass("selected first"),e.siblings().removeClass("first")),t.shiftKey){var i=!1,s=!1;e.siblings().removeClass("selected").siblings(".first").addClass("selected"),e.prevAll().each(function(){N(this).is(".first")&&(i=!0)}),e.nextAll().each(function(){N(this).is(".first")&&(s=!0)}),i&&e.prevAll().each(function(){if(N(this).is(".selected"))return!1;N(this).not(".disabled, .optgroup").addClass("selected")}),s&&e.nextAll().each(function(){if(N(this).is(".selected"))return!1;N(this).not(".disabled, .optgroup").addClass("selected")}),1==o.filter(".selected").length&&e.addClass("first")}T.prop("selected",!1),o.filter(".selected").each(function(){var t=N(this),e=t.index();t.is(".option")&&(e-=t.prevAll(".optgroup").length),T.eq(e).prop("selected",!0)}),P.change()}),T.each(function(t){N(this).data("optionIndex",t)}),P.on("change.styler",function(){o.removeClass("selected");var e=[];T.filter(":selected").each(function(){e.push(N(this).data("optionIndex"))}),o.not(".optgroup").filter(function(t){return-1<N.inArray(t,e)}).addClass("selected")}).on("focus.styler",function(){e.addClass("focused")}).on("blur.styler",function(){e.removeClass("focused")}),n>e.height()&&P.on("keydown.styler",function(t){38!=t.which&&37!=t.which&&33!=t.which||i.scrollTop(i.scrollTop()+o.filter(".selected").position().top-r),40!=t.which&&39!=t.which&&34!=t.which||i.scrollTop(i.scrollTop()+o.filter(".selected:last").position().top-i.innerHeight()+2*r)}))}()}else!function(){var t=new A,e="",i=P.data("placeholder"),s=P.data("search"),o=P.data("search-limit"),n=P.data("search-not-found"),r=P.data("search-placeholder"),l=P.data("smart-positioning");void 0===i&&(i=q.selectPlaceholder),void 0!==s&&""!==s||(s=q.selectSearch),void 0!==o&&""!==o||(o=q.selectSearchLimit),void 0!==n&&""!==n||(n=q.selectSearchNotFound),void 0===r&&(r=q.selectSearchPlaceholder),void 0!==l&&""!==l||(l=q.selectSmartPositioning);var c=N('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').attr({id:t.id,title:t.title}).addClass(t.classes).data(t.data);P.after(c).prependTo(c);var h=c.css("z-index");h=0<h?h:1;var a=N("div.jq-selectbox__select",c),d=N("div.jq-selectbox__select-text",c),p=T.filter(":selected");D(),s&&(e='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+r+'"></div><div class="jq-selectbox__not-found">'+n+"</div>");var u=N('<div class="jq-selectbox__dropdown">'+e+"<ul>"+I+"</ul></div>");c.append(u);var f=N("ul",u),m=N("li",u),_=N("input",u),g=N("div.jq-selectbox__not-found",u).hide();m.length<o&&_.parent().hide(),""===T.first().text()&&T.first().is(":selected")&&!1!==i?d.text(i).addClass("placeholder"):d.text(p.text());var v=0,y=0;if(m.css({display:"inline-block"}),m.each(function(){var t=N(this);t.innerWidth()>v&&(v=t.innerWidth(),y=t.width())}),m.css({display:""}),d.is(".placeholder")&&d.width()>v)d.width(d.width());else{var b=c.clone().appendTo("body").width("auto"),w=b.outerWidth();b.remove(),w==c.outerWidth()&&d.width(y)}v>c.width()&&u.width(v),""===T.first().text()&&""!==P.data("placeholder")&&m.first().hide();var x=c.outerHeight(!0),$=_.parent().outerHeight(!0)||0,C=f.css("max-height"),k=m.filter(".selected");if(k.length<1&&m.first().addClass("selected sel"),void 0===m.data("li-height")){var O=m.outerHeight();!1!==i&&(O=m.eq(1).outerHeight()),m.data("li-height",O)}var S=u.css("top");if("auto"==u.css("left")&&u.css({left:0}),"auto"==u.css("top")&&(u.css({top:x}),S=x),u.hide(),k.length&&(T.first().text()!=p.text()&&c.addClass("changed"),c.data("jqfs-class",k.data("jqfs-class")),c.addClass(k.data("jqfs-class"))),P.is(":disabled"))return c.addClass("disabled");a.click(function(){if(N("div.jq-selectbox").filter(".opened").length&&q.onSelectClosed.call(N("div.jq-selectbox").filter(".opened")),P.focus(),!j){var e=N(window),i=m.data("li-height"),s=c.offset().top,o=e.height()-x-(s-e.scrollTop()),t=P.data("visible-options");void 0!==t&&""!==t||(t=q.selectVisibleOptions);var n=5*i,r=i*t;0<t&&t<6&&(n=r),0===t&&(r="auto");var a=function(){u.height("auto").css({bottom:"auto",top:S});function t(){f.css("max-height",Math.floor((o-20-$)/i)*i)}t(),f.css("max-height",r),"none"!=C&&f.css("max-height",C),o<u.outerHeight()+20&&t()};!0===l||1===l?n+$+20<o?(a(),c.removeClass("dropup").addClass("dropdown")):(function(){u.height("auto").css({top:"auto",bottom:S});function t(){f.css("max-height",Math.floor((s-e.scrollTop()-20-$)/i)*i)}t(),f.css("max-height",r),"none"!=C&&f.css("max-height",C),s-e.scrollTop()-20<u.outerHeight()+20&&t()}(),c.removeClass("dropdown").addClass("dropup")):!1===l||0===l?n+$+20<o&&(a(),c.removeClass("dropup").addClass("dropdown")):(u.height("auto").css({bottom:"auto",top:S}),f.css("max-height",r),"none"!=C&&f.css("max-height",C)),c.offset().left+u.outerWidth()>e.width()&&u.css({left:"auto",right:0}),N("div.jqselect").css({zIndex:h-1}).removeClass("opened"),c.css({zIndex:h}),u.is(":hidden")?(N("div.jq-selectbox__dropdown:visible").hide(),u.show(),c.addClass("opened focused"),q.onSelectOpened.call(c)):(u.hide(),c.removeClass("opened dropup dropdown"),N("div.jq-selectbox").filter(".opened").length&&q.onSelectClosed.call(c)),_.length&&(_.val("").keyup(),g.hide(),_.keyup(function(){var t=N(this).val();m.each(function(){N(this).html().match(new RegExp(".*?"+t+".*?","i"))?N(this).show():N(this).hide()}),""===T.first().text()&&""!==P.data("placeholder")&&m.first().hide(),m.filter(":visible").length<1?g.show():g.hide()})),m.filter(".selected").length&&(""===P.val()?f.scrollTop(0):(f.innerHeight()/i%2!=0&&(i/=2),f.scrollTop(f.scrollTop()+m.filter(".selected").position().top-f.innerHeight()/2+i))),F(f)}}),m.hover(function(){N(this).siblings().removeClass("selected")}),m.filter(".selected").text(),m.filter(":not(.disabled):not(.optgroup)").click(function(){P.focus();var t=N(this),e=t.text();if(!t.is(".selected")){var i=t.index();i-=t.prevAll(".optgroup").length,t.addClass("selected sel").siblings().removeClass("selected sel"),T.prop("selected",!1).eq(i).prop("selected",!0),e,d.text(e),c.data("jqfs-class")&&c.removeClass(c.data("jqfs-class")),c.data("jqfs-class",t.data("jqfs-class")),c.addClass(t.data("jqfs-class")),P.change()}u.hide(),c.removeClass("opened dropup dropdown"),q.onSelectClosed.call(c)}),u.mouseout(function(){N("li.sel",u).addClass("selected")}),P.on("change.styler",function(){d.text(T.filter(":selected").text()).removeClass("placeholder"),m.removeClass("selected sel").not(".optgroup").eq(P[0].selectedIndex).addClass("selected sel"),T.first().text()!=m.filter(".selected").text()?c.addClass("changed"):c.removeClass("changed")}).on("focus.styler",function(){c.addClass("focused"),N("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){c.removeClass("focused")}).on("keydown.styler keyup.styler",function(t){var e=m.data("li-height");""===P.val()?d.text(i).addClass("placeholder"):d.text(T.filter(":selected").text()),m.removeClass("selected sel").not(".optgroup").eq(P[0].selectedIndex).addClass("selected sel"),38!=t.which&&37!=t.which&&33!=t.which&&36!=t.which||(""===P.val()?f.scrollTop(0):f.scrollTop(f.scrollTop()+m.filter(".selected").position().top)),40!=t.which&&39!=t.which&&34!=t.which&&35!=t.which||f.scrollTop(f.scrollTop()+m.filter(".selected").position().top-f.innerHeight()+e),13==t.which&&(t.preventDefault(),u.hide(),c.removeClass("opened dropup dropdown"),q.onSelectClosed.call(c))}).on("keydown.styler",function(t){32==t.which&&(t.preventDefault(),a.click())}),M.registered||(N(document).on("click",M),M.registered=!0)}()};n(),P.on("refresh",function(){P.off(".styler").parent().before(P).remove(),n()})}else P.is(":reset")&&P.on("click",function(){setTimeout(function(){P.closest("form").find("input, select").trigger("refresh")},1)})},destroy:function(){var t=N(this.element);t.is(":checkbox")||t.is(":radio")?(t.removeData("_"+o).off(".styler refresh").removeAttr("style").parent().before(t).remove(),t.closest("label").add('label[for="'+t.attr("id")+'"]').off(".styler")):t.is('input[type="number"]')?t.removeData("_"+o).off(".styler refresh").closest(".jq-number").before(t).remove():(t.is(":file")||t.is("select"))&&t.removeData("_"+o).off(".styler refresh").removeAttr("style").parent().before(t).remove()}},N.fn[o]=function(e){var i,s=arguments;return void 0===e||"object"==typeof e?(this.each(function(){N.data(this,"_"+o)||N.data(this,"_"+o,new n(this,e))}).promise().done(function(){var t=N(this[0]).data("_"+o);t&&t.options.onFormStyled.call()}),this):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=N.data(this,"_"+o);t instanceof n&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(s,1)))}),void 0!==i?i:this):void 0},M.registered=!1}),function(t,e){"function"==typeof define&&define.amd?define("sifter",e):"object"==typeof exports?module.exports=e():t.Sifter=e()}(this,function(){function t(t,e){this.items=t,this.settings=e||{diacritics:!0}}t.prototype.tokenize=function(t){if(!(t=a(String(t||"").toLowerCase()))||!t.length)return[];var e,i,s,o,n=[],r=t.split(/ +/);for(e=0,i=r.length;e<i;e++){if(s=l(r[e]),this.settings.diacritics)for(o in c)c.hasOwnProperty(o)&&(s=s.replace(new RegExp(o,"g"),c[o]));n.push({string:r[e],regex:new RegExp(s,"i")})}return n},t.prototype.iterator=function(t,e){(r(t)?Array.prototype.forEach||function(t){for(var e=0,i=this.length;e<i;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)}).apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var o,n,r,a;t=this.prepareSearch(t,e),n=t.tokens,o=t.options.fields,r=n.length,a=t.options.nesting;function l(t,e){var i,s;return t?-1===(s=(t=String(t||"")).search(e.regex))?0:(i=e.string.length/t.length,0===s&&(i+=.5),i):0}var c,h=(c=o.length)?1===c?function(t,e){return l(f(e,o[0],a),t)}:function(t,e){for(var i=0,s=0;i<c;i++)s+=l(f(e,o[i],a),t);return s/c}:function(){return 0};return r?1===r?function(t){return h(n[0],t)}:"and"===t.options.conjunction?function(t){for(var e,i=0,s=0;i<r;i++){if((e=h(n[i],t))<=0)return 0;s+=e}return s/r}:function(t){for(var e=0,i=0;e<r;e++)i+=h(n[e],t);return i/r}:function(){return 0}},t.prototype.getSortFunction=function(t,i){var e,s,o,n,r,a,l,c,h,d,p;if(p=!(t=(o=this).prepareSearch(t,i)).query&&i.sort_empty||i.sort,h=function(t,e){return"$score"===t?e.score:f(o.items[e.id],t,i.nesting)},r=[],p)for(e=0,s=p.length;e<s;e++)!t.query&&"$score"===p[e].field||r.push(p[e]);if(t.query){for(d=!0,e=0,s=r.length;e<s;e++)if("$score"===r[e].field){d=!1;break}d&&r.unshift({field:"$score",direction:"desc"})}else for(e=0,s=r.length;e<s;e++)if("$score"===r[e].field){r.splice(e,1);break}for(c=[],e=0,s=r.length;e<s;e++)c.push("desc"===r[e].direction?-1:1);return(a=r.length)?1===a?(n=r[0].field,l=c[0],function(t,e){return l*u(h(n,t),h(n,e))}):function(t,e){var i,s,o;for(i=0;i<a;i++)if(o=r[i].field,s=c[i]*u(h(o,t),h(o,e)))return s;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;var i=(e=n({},e)).fields,s=e.sort,o=e.sort_empty;return i&&!r(i)&&(e.fields=[i]),s&&!r(s)&&(e.sort=[s]),o&&!r(o)&&(e.sort_empty=[o]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,i){var s,o,e,n,r=this;return o=this.prepareSearch(t,i),i=o.options,t=o.query,n=i.score||r.getScoreFunction(o),t.length?r.iterator(r.items,function(t,e){s=n(t),(!1===i.filter||0<s)&&o.items.push({score:s,id:e})}):r.iterator(r.items,function(t,e){o.items.push({score:1,id:e})}),(e=r.getSortFunction(o,i))&&o.items.sort(e),o.total=o.items.length,"number"==typeof i.limit&&(o.items=o.items.slice(0,i.limit)),o};var u=function(t,e){return"number"==typeof t&&"number"==typeof e||(t=i(String(t||"")),e=i(String(e||""))),e<t?1:t<e?-1:0},n=function(t,e){var i,s,o,n;for(i=1,s=arguments.length;i<s;i++)if(n=arguments[i])for(o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);return t},f=function(t,e,i){if(t&&e){if(!i)return t[e];for(var s=e.split(".");s.length&&(t=t[s.shift()]););return t}},a=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},l=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},i=function(){var t,e,i,s,o="",n={};for(i in c)if(c.hasOwnProperty(i))for(o+=s=c[i].substring(2,c[i].length-1),t=0,e=s.length;t<e;t++)n[s.charAt(t)]=i;var r=new RegExp("["+o+"]","g");return function(t){return t.replace(r,function(t){return n[t]}).toLowerCase()}}();return t}),function(t,e){"function"==typeof define&&define.amd?define("microplugin",e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={mixin:function(s){s.plugins={},s.prototype.initializePlugins=function(t){var e,i,s,o=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},n.isArray(t))for(e=0,i=t.length;e<i;e++)"string"==typeof t[e]?o.push(t[e]):(this.plugins.settings[t[e].name]=t[e].options,o.push(t[e].name));else if(t)for(s in t)t.hasOwnProperty(s)&&(this.plugins.settings[s]=t[s],o.push(s));for(;o.length;)this.require(o.shift())},s.prototype.loadPlugin=function(t){var e=this.plugins,i=s.plugins[t];if(!s.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');e.requested[t]=!0,e.loaded[t]=i.fn.apply(this,[this.plugins.settings[t]||{}]),e.names.push(t)},s.prototype.require=function(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]},s.define=function(t,e){s.plugins[t]={name:t,fn:e}}}},n={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("sifter"),require("microplugin")):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(C,l,t){"use strict";function k(t,e){if("string"!=typeof e||e.length){var l="string"==typeof e?new RegExp(e,"i"):e,c=function(t){var e=0;if(3===t.nodeType){var i=t.data.search(l);if(0<=i&&0<t.data.length){var s=t.data.match(l),o=document.createElement("span");o.className="highlight";var n=t.splitText(i),r=(n.splitText(s[0].length),n.cloneNode(!0));o.appendChild(r),n.parentNode.replaceChild(o,n),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName))for(var a=0;a<t.childNodes.length;++a)a+=c(t.childNodes[a]);return e};return t.each(function(){c(this)})}}C.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var t=this.parentNode;t.replaceChild(this.firstChild,this),t.normalize()}).end()};function s(){}s.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[t]:(this._events=this._events||{},void(t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)))},trigger:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},s.mixin=function(t){for(var e=["on","off","trigger"],i=0;i<e.length;i++)t.prototype[e[i]]=s.prototype[e[i]]};function c(t){return void 0!==t}function O(t){return null==t?null:"boolean"==typeof t?t?"1":"0":t+""}function a(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function i(e,i,t){var s,o=e.trigger,n={};for(s in e.trigger=function(){var t=arguments[0];if(-1===i.indexOf(t))return o.apply(e,arguments);n[t]=arguments},t.apply(e,[]),e.trigger=o,n)n.hasOwnProperty(s)&&o.apply(e,n[s])}function p(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var i=document.selection.createRange(),s=document.selection.createRange().text.length;i.moveStart("character",-t.value.length),e.start=i.text.length-s,e.length=s}return e}function g(h){function t(t,e){var i,s,o,n,r,a,l,c;e=e||{},(t=t||window.event||{}).metaKey||t.altKey||!e.force&&!1===h.data("grow")||(i=h.val(),t.type&&"keydown"===t.type.toLowerCase()&&(o=97<=(s=t.keyCode)&&s<=122||65<=s&&s<=90||48<=s&&s<=57||32===s,46===s||8===s?(c=p(h[0])).length?i=i.substring(0,c.start)+i.substring(c.start+c.length):8===s&&c.start?i=i.substring(0,c.start-1)+i.substring(c.start+1):46===s&&void 0!==c.start&&(i=i.substring(0,c.start)+i.substring(c.start+1)):o&&(a=t.shiftKey,l=String.fromCharCode(t.keyCode),i+=l=a?l.toUpperCase():l.toLowerCase())),n=h.attr("placeholder"),!i&&n&&(i=n),(r=function(t,e){if(!t)return 0;var i=C("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");!function(t,e,i){var s,o,n={};if(i)for(s=0,o=i.length;s<o;s++)n[i[s]]=t.css(i[s]);else n=t.css();e.css(n)}(e,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var s=i.width();return i.remove(),s}(i,h)+4)!==d&&(d=r,h.width(r),h.triggerHandler("resize")))}var d=null;h.on("keydown keyup update blur",t),t()}var e,o,v=/Mac/.test(navigator.userAgent),y=v?91:17,b=v?18:17,w=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,r={before:function(t,e,i){var s=t[e];t[e]=function(){return i.apply(t,arguments),s.apply(t,arguments)}},after:function(e,t,i){var s=e[t];e[t]=function(){var t=s.apply(e,arguments);return i.apply(e,arguments),t}}},h=function(t,e){var i,s,o,n,r=this;(n=t[0]).selectize=r;var a=window.getComputedStyle&&window.getComputedStyle(n,null);if(o=(o=a?a.getPropertyValue("direction"):n.currentStyle&&n.currentStyle.direction)||t.parents("[dir]:first").attr("dir")||"",C.extend(r,{order:0,settings:e,$input:t,tabIndex:t.attr("tabindex")||"",tagType:"select"===n.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++h.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:t.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===e.loadThrottle?r.onSearchChange:function(i,s){var o;return function(){var t=this,e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(t,e)},s)}}(r.onSearchChange,e.loadThrottle)}),r.sifter=new l(this.options,{diacritics:e.diacritics}),r.settings.options){for(i=0,s=r.settings.options.length;i<s;i++)r.registerOption(r.settings.options[i]);delete r.settings.options}if(r.settings.optgroups){for(i=0,s=r.settings.optgroups.length;i<s;i++)r.registerOptionGroup(r.settings.optgroups[i]);delete r.settings.optgroups}r.settings.mode=r.settings.mode||(1===r.settings.maxItems?"single":"multi"),"boolean"!=typeof r.settings.hideSelected&&(r.settings.hideSelected="multi"===r.settings.mode),r.initializePlugins(r.settings.plugins),r.setupCallbacks(),r.setupTemplates(),r.setup()};return s.mixin(h),void 0!==t?t.mixin(h):(e="Dependency MicroPlugin is missing",o=(o={explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'})||{},console.error("Selectize: "+e),o.explanation&&(console.group&&console.group(),console.error(o.explanation),console.group&&console.groupEnd())),C.extend(h.prototype,{setup:function(){var t,e,i,s,o,n,r,a,l,c,h=this,d=h.settings,p=h.eventNS,u=C(window),f=C(document),m=h.$input;if(r=h.settings.mode,a=m.attr("class")||"",t=C("<div>").addClass(d.wrapperClass).addClass(a).addClass(r),e=C("<div>").addClass(d.inputClass).addClass("items").appendTo(t),i=C('<input type="'+d.searchInputType+'" maxlength="'+d.maxLength+'" autocomplete="off" />').appendTo(e).attr("tabindex",m.is(":disabled")?"-1":h.tabIndex),n=C(d.dropdownParent||t),s=C("<div>").addClass(d.dropdownClass).addClass(r).hide().appendTo(n),o=C("<div>").addClass(d.dropdownContentClass).appendTo(s),(c=m.attr("id"))&&(i.attr("id",c+"-selectized"),C("label[for='"+c+"']").attr("for",c+"-selectized")),h.settings.copyClassesToDropdown&&s.addClass(a),t.css({width:m[0].style.width}),h.plugins.names.length&&(l="plugin-"+h.plugins.names.join(" plugin-"),t.addClass(l),s.addClass(l)),(null===d.maxItems||1<d.maxItems)&&1===h.tagType&&m.attr("multiple","multiple"),h.settings.placeholder&&i.attr("placeholder",d.placeholder),!h.settings.splitOn&&h.settings.delimiter){var _=h.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");h.settings.splitOn=new RegExp("\\s*"+_+"+\\s*")}m.attr("autocorrect")&&i.attr("autocorrect",m.attr("autocorrect")),m.attr("autocapitalize")&&i.attr("autocapitalize",m.attr("autocapitalize")),h.$wrapper=t,h.$control=e,h.$control_input=i,h.$dropdown=s,h.$dropdown_content=o,s.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(t){t.stopImmediatePropagation()}),s.on("mouseenter","[data-selectable]",function(){return h.onOptionHover.apply(h,arguments)}),s.on("mousedown click","[data-selectable]",function(){return h.onOptionSelect.apply(h,arguments)}),function(i,t,e,s){i.on(t,e,function(t){for(var e=t.target;e&&e.parentNode!==i[0];)e=e.parentNode;return t.currentTarget=e,s.apply(this,[t])})}(e,"mousedown","*:not(input)",function(){return h.onItemSelect.apply(h,arguments)}),g(i),e.on({mousedown:function(){return h.onMouseDown.apply(h,arguments)},click:function(){return h.onClick.apply(h,arguments)}}),i.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return h.onKeyDown.apply(h,arguments)},keyup:function(){return h.onKeyUp.apply(h,arguments)},keypress:function(){return h.onKeyPress.apply(h,arguments)},resize:function(){h.positionDropdown.apply(h,[])},blur:function(){return h.onBlur.apply(h,arguments)},focus:function(){return h.ignoreBlur=!1,h.onFocus.apply(h,arguments)},paste:function(){return h.onPaste.apply(h,arguments)}}),f.on("keydown"+p,function(t){h.isCmdDown=t[v?"metaKey":"ctrlKey"],h.isCtrlDown=t[v?"altKey":"ctrlKey"],h.isShiftDown=t.shiftKey}),f.on("keyup"+p,function(t){t.keyCode===b&&(h.isCtrlDown=!1),16===t.keyCode&&(h.isShiftDown=!1),t.keyCode===y&&(h.isCmdDown=!1)}),f.on("mousedown"+p,function(t){if(h.isFocused){if(t.target===h.$dropdown[0]||t.target.parentNode===h.$dropdown[0])return!1;h.$control.has(t.target).length||t.target===h.$control[0]||h.blur(t.target)}}),u.on(["scroll"+p,"resize"+p].join(" "),function(){h.isOpen&&h.positionDropdown.apply(h,arguments)}),u.on("mousemove"+p,function(){h.ignoreHover=!1}),this.revertSettings={$children:m.children().detach(),tabindex:m.attr("tabindex")},m.attr("tabindex",-1).hide().after(h.$wrapper),C.isArray(d.items)&&(h.setValue(d.items),delete d.items),w&&m.on("invalid"+p,function(t){t.preventDefault(),h.isInvalid=!0,h.refreshState()}),h.updateOriginalInput(),h.refreshItems(),h.refreshState(),h.updatePlaceholder(),h.isSetup=!0,m.is(":disabled")&&h.disable(),h.on("change",this.onChange),m.data("selectize",h),m.addClass("selectized"),h.trigger("initialize"),!0===d.preload&&h.onSearchChange("")},setupTemplates:function(){var i=this.settings.labelField,s=this.settings.optgroupLabelField,t={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[s])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[i])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[i])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};this.settings.render=C.extend({},t,this.settings.render)},setupCallbacks:function(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)i.hasOwnProperty(t)&&(e=this.settings[i[t]])&&this.on(t,e)},onClick:function(t){this.isFocused||(this.focus(),t.preventDefault())},onMouseDown:function(t){var e=this,i=t.isDefaultPrevented();if(C(t.target),e.isFocused){if(t.target!==e.$control_input[0])return"single"===e.settings.mode?e.isOpen?e.close():e.open():i||e.setActiveItem(null),!1}else i||window.setTimeout(function(){e.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var o=this;o.isFull()||o.isInputHidden||o.isLocked?t.preventDefault():o.settings.splitOn&&setTimeout(function(){var t=o.$control_input.val();if(t.match(o.settings.splitOn))for(var e=C.trim(t).split(o.settings.splitOn),i=0,s=e.length;i<s;i++)o.createItem(e[i])},0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){var e=(t.target,this.$control_input[0],this);if(!e.isLocked){switch(t.keyCode){case 65:if(e.isCmdDown)return void e.selectAll();break;case 27:return void(e.isOpen&&(t.preventDefault(),t.stopPropagation(),e.close()));case 78:if(!t.ctrlKey||t.altKey)break;case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.$activeOption){e.ignoreHover=!0;var i=e.getAdjacentOption(e.$activeOption,1);i.length&&e.setActiveOption(i,!0,!0)}return void t.preventDefault();case 80:if(!t.ctrlKey||t.altKey)break;case 38:if(e.$activeOption){e.ignoreHover=!0;var s=e.getAdjacentOption(e.$activeOption,-1);s.length&&e.setActiveOption(s,!0,!0)}return void t.preventDefault();case 13:return void(e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),t.preventDefault()));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return e.settings.selectOnTab&&e.isOpen&&e.$activeOption&&(e.onOptionSelect({currentTarget:e.$activeOption}),e.isFull()||t.preventDefault()),void(e.settings.create&&e.createItem()&&t.preventDefault());case 8:case 46:return void e.deleteSelection(t)}return!e.isFull()&&!e.isInputHidden||(v?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()}9!==t.keyCode&&t.preventDefault()},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var i=e.$control_input.val()||"";e.lastValue!==i&&(e.lastValue=i,e.onSearchChange(i),e.refreshOptions(),e.trigger("type",i))},onSearchChange:function(e){var i=this,s=i.settings.load;s&&(i.loadedSearches.hasOwnProperty(e)||(i.loadedSearches[e]=!0,i.load(function(t){s.apply(i,[e,t])})))},onFocus:function(t){var e=this,i=e.isFocused;if(e.isDisabled)return e.blur(),t&&t.preventDefault(),!1;e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.onSearchChange(""),i||e.trigger("focus"),e.$activeItems.length||(e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())},onBlur:function(t,e){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(t);var s=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),e&&e.focus&&e.focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,s):s()}},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(t){var e,i,s=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(i=C(t.currentTarget)).hasClass("create")?s.createItem(null,function(){s.settings.closeAfterSelect&&s.close()}):void 0!==(e=i.attr("data-value"))&&(s.lastQuery=null,s.setTextboxValue(""),s.addItem(e),s.settings.closeAfterSelect?s.close():!s.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&s.setActiveOption(s.getOption(e)))},onItemSelect:function(t){this.isLocked||"multi"===this.settings.mode&&(t.preventDefault(),this.setActiveItem(t.currentTarget,t))},load:function(t){var e=this,i=e.$wrapper.addClass(e.settings.loadingClass);e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(e.isFocused&&!e.isInputHidden)),e.loading||i.removeClass(e.settings.loadingClass),e.trigger("load",t)}])},setTextboxValue:function(t){var e=this.$control_input;e.val()!==t&&(e.val(t).triggerHandler("update"),this.lastValue=t)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(t,e){i(this,e?[]:["change"],function(){this.clear(e),this.addItems(t,e)})},setActiveItem:function(t,e){var i,s,o,n,r,a,l,c,h=this;if("single"!==h.settings.mode){if(!(t=C(t)).length)return C(h.$activeItems).removeClass("active"),h.$activeItems=[],void(h.isFocused&&h.showInput());if("mousedown"===(i=e&&e.type.toLowerCase())&&h.isShiftDown&&h.$activeItems.length){for(c=h.$control.children(".active:last"),n=Array.prototype.indexOf.apply(h.$control[0].childNodes,[c[0]]),(r=Array.prototype.indexOf.apply(h.$control[0].childNodes,[t[0]]))<n&&(l=n,n=r,r=l),s=n;s<=r;s++)a=h.$control[0].childNodes[s],-1===h.$activeItems.indexOf(a)&&(C(a).addClass("active"),h.$activeItems.push(a));e.preventDefault()}else"mousedown"===i&&h.isCtrlDown||"keydown"===i&&this.isShiftDown?t.hasClass("active")?(o=h.$activeItems.indexOf(t[0]),h.$activeItems.splice(o,1),t.removeClass("active")):h.$activeItems.push(t.addClass("active")[0]):(C(h.$activeItems).removeClass("active"),h.$activeItems=[t.addClass("active")[0]]);h.hideInput(),this.isFocused||h.focus()}},setActiveOption:function(t,e,i){var s,o,n,r,a,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,(t=C(t)).length&&(l.$activeOption=t.addClass("active"),!e&&c(e)||(s=l.$dropdown_content.height(),o=l.$activeOption.outerHeight(!0),e=l.$dropdown_content.scrollTop()||0,a=(r=n=l.$activeOption.offset().top-l.$dropdown_content.offset().top+e)-s+o,s+e<n+o?l.$dropdown_content.stop().animate({scrollTop:a},i?l.settings.scrollDuration:0):n<e&&l.$dropdown_content.stop().animate({scrollTop:r},i?l.settings.scrollDuration:0)))},selectAll:function(){var t=this;"single"!==t.settings.mode&&(t.$activeItems=Array.prototype.slice.apply(t.$control.children(":not(input)").addClass("active")),t.$activeItems.length&&(t.hideInput(),t.close()),t.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.$control_input[0].focus(),window.setTimeout(function(){t.ignoreFocus=!1,t.onFocus()},0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.settings,e=t.sortField;return"string"==typeof e&&(e=[{field:e}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}},search:function(t){var e,i,s,o=this,n=o.settings,r=this.getSearchOptions();if(n.score&&"function"!=typeof(s=o.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,i=o.sifter.search(t,C.extend(r,{score:s})),o.currentResults=i):i=C.extend(!0,{},o.currentResults),n.hideSelected)for(e=i.items.length-1;0<=e;e--)-1!==o.items.indexOf(O(i.items[e].id))&&i.items.splice(e,1);return i},refreshOptions:function(t){var e,i,s,o,n,r,a,l,c,h,d,p,u,f,m,_;void 0===t&&(t=!0);var g,v,y=this,b=C.trim(y.$control_input.val()),w=y.search(b),x=y.$dropdown_content,$=y.$activeOption&&O(y.$activeOption.attr("data-value"));for(o=w.items.length,"number"==typeof y.settings.maxOptions&&(o=Math.min(o,y.settings.maxOptions)),n={},r=[],e=0;e<o;e++)for(a=y.options[w.items[e].id],l=y.render("option",a),c=a[y.settings.optgroupField]||"",i=0,s=(h=C.isArray(c)?c:[c])&&h.length;i<s;i++)c=h[i],y.optgroups.hasOwnProperty(c)||(c=""),n.hasOwnProperty(c)||(n[c]=document.createDocumentFragment(),r.push(c)),n[c].appendChild(l);for(this.settings.lockOptgroupOrder&&r.sort(function(t,e){return(y.optgroups[t].$order||0)-(y.optgroups[e].$order||0)}),d=document.createDocumentFragment(),e=0,o=r.length;e<o;e++)c=r[e],y.optgroups.hasOwnProperty(c)&&n[c].childNodes.length?((p=document.createDocumentFragment()).appendChild(y.render("optgroup_header",y.optgroups[c])),p.appendChild(n[c]),d.appendChild(y.render("optgroup",C.extend({},y.optgroups[c],{html:(g=p,v=void 0,v=document.createElement("div"),v.appendChild(g.cloneNode(!0)),v.innerHTML),dom:p})))):d.appendChild(n[c]);if(x.html(d),y.settings.highlight&&(x.removeHighlight(),w.query.length&&w.tokens.length))for(e=0,o=w.tokens.length;e<o;e++)k(x,w.tokens[e].regex);if(!y.settings.hideSelected)for(e=0,o=y.items.length;e<o;e++)y.getOption(y.items[e]).addClass("selected");(u=y.canCreate(b))&&0===w.items.length&&(x.prepend(y.render("option_create",{input:b})),_=C(x[0].childNodes[0])),y.hasOptions=0<w.items.length||u,y.hasOptions?(0<w.items.length?((m=$&&y.getOption($))&&m.length?f=m:"single"===y.settings.mode&&y.items.length&&(f=y.getOption(y.items[0])),f&&f.length||(f=_&&!y.settings.addPrecedence?y.getAdjacentOption(_,1):x.find("[data-selectable]:first"))):f=_,y.setActiveOption(f),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var e,i,s,o=this;if(C.isArray(t))for(e=0,i=t.length;e<i;e++)o.addOption(t[e]);else(s=o.registerOption(t))&&(o.userOptions[s]=!0,o.lastQuery=null,o.trigger("option_add",s,t))},registerOption:function(t){var e=O(t[this.settings.valueField]);return null!=e&&!this.options.hasOwnProperty(e)&&(t.$order=t.$order||++this.order,this.options[e]=t,e)},registerOptionGroup:function(t){var e=O(t[this.settings.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.settings.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.trigger("optgroup_add",t,e)},removeOptionGroup:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.renderCache={},this.trigger("optgroup_remove",t))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,e){var i,s,o,n,r,a,l,c=this;if(t=O(t),o=O(e[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=c.options[t].$order,o!==t&&(delete c.options[t],-1!==(n=c.items.indexOf(t))&&c.items.splice(n,1,o)),e.$order=e.$order||l,c.options[o]=e,r=c.renderCache.item,a=c.renderCache.option,r&&(delete r[t],delete r[o]),a&&(delete a[t],delete a[o]),-1!==c.items.indexOf(o)&&(i=c.getItem(t),s=C(c.render("item",e)),i.hasClass("active")&&s.addClass("active"),i.replaceWith(s)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(t,e){var i=this;t=O(t);var s=i.renderCache.item,o=i.renderCache.option;s&&delete s[t],o&&delete o[t],delete i.userOptions[t],delete i.options[t],i.lastQuery=null,i.trigger("option_remove",t),i.removeItem(t,e)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,e){var i=this.$dropdown.find("[data-selectable]"),s=i.index(t)+e;return 0<=s&&s<i.length?i.eq(s):C()},getElementWithValue:function(t,e){if(void 0!==(t=O(t))&&null!==t)for(var i=0,s=e.length;i<s;i++)if(e[i].getAttribute("data-value")===t)return C(e[i]);return C()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(t,e){for(var i=C.isArray(t)?t:[t],s=0,o=i.length;s<o;s++)this.isPending=s<o-1,this.addItem(i[s],e)},addItem:function(a,l){i(this,l?[]:["change"],function(){var t,e,i,s,o,n=this,r=n.settings.mode;a=O(a),-1===n.items.indexOf(a)?n.options.hasOwnProperty(a)&&("single"===r&&n.clear(l),"multi"===r&&n.isFull()||(t=C(n.render("item",n.options[a])),o=n.isFull(),n.items.splice(n.caretPos,0,a),n.insertAtCaret(t),n.isPending&&(o||!n.isFull())||n.refreshState(),n.isSetup&&(i=n.$dropdown_content.find("[data-selectable]"),n.isPending||(e=n.getOption(a),s=n.getAdjacentOption(e,1).attr("data-value"),n.refreshOptions(n.isFocused&&"single"!==r),s&&n.setActiveOption(n.getOption(s))),!i.length||n.isFull()?n.close():n.positionDropdown(),n.updatePlaceholder(),n.trigger("item_add",a,t),n.updateOriginalInput({silent:l})))):"single"===r&&n.close()})},removeItem:function(t,e){var i,s,o,n=this;i=t instanceof C?t:n.getItem(t),t=O(i.attr("data-value")),-1!==(s=n.items.indexOf(t))&&(i.remove(),i.hasClass("active")&&(o=n.$activeItems.indexOf(i[0]),n.$activeItems.splice(o,1)),n.items.splice(s,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(t)&&n.removeOption(t,e),s<n.caretPos&&n.setCaret(n.caretPos-1),n.refreshState(),n.updatePlaceholder(),n.updateOriginalInput({silent:e}),n.positionDropdown(),n.trigger("item_remove",t,i))},createItem:function(t,i){var s=this,o=s.caretPos;t=t||C.trim(s.$control_input.val()||"");var n=arguments[arguments.length-1];if("function"!=typeof n&&(n=function(){}),"boolean"!=typeof i&&(i=!0),!s.canCreate(t))return n(),!1;s.lock();var e="function"==typeof s.settings.create?this.settings.create:function(t){var e={};return e[s.settings.labelField]=t,e[s.settings.valueField]=t,e},r=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}(function(t){if(s.unlock(),!t||"object"!=typeof t)return n();var e=O(t[s.settings.valueField]);if("string"!=typeof e)return n();s.setTextboxValue(""),s.addOption(t),s.setCaret(o),s.addItem(e),s.refreshOptions(i&&"single"!==s.settings.mode),n(t)}),a=e.apply(this,[t,r]);return void 0!==a&&r(a),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var t=!this.items.length;this.isInvalid=t,this.$control_input.prop("required",t),this.$input.prop("required",!t)},refreshClasses:function(){var t=this,e=t.isFull(),i=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",i).toggleClass("full",e).toggleClass("not-full",!e).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!C.isEmptyObject(t.options)).toggleClass("has-items",0<t.items.length),t.$control_input.data("grow",!e&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(t){var e,i,s,o,n=this;if(t=t||{},1===n.tagType){for(s=[],e=0,i=n.items.length;e<i;e++)o=n.options[n.items[e]][n.settings.labelField]||"",s.push('<option value="'+a(n.items[e])+'" selected="selected">'+a(o)+"</option>");s.length||this.$input.attr("multiple")||s.push('<option value="" selected="selected"></option>'),n.$input.html(s.join(""))}else n.$input.val(n.getValue()),n.$input.attr("value",n.$input.val());n.isSetup&&(t.silent||n.trigger("change",n.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update",{force:!0})}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(),t.isOpen=!0,t.refreshState(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",t.$dropdown))},close:function(){var t=this,e=t.isOpen;"single"===t.settings.mode&&t.items.length&&(t.hideInput(),setTimeout(function(){t.$control_input.blur()})),t.isOpen=!1,t.$dropdown.hide(),t.setActiveOption(null),t.refreshState(),e&&t.trigger("dropdown_close",t.$dropdown)},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(t){var e=this;e.items.length&&(e.$control.children(":not(input)").remove(),e.items=[],e.lastQuery=null,e.setCaret(0),e.setActiveItem(null),e.updatePlaceholder(),e.updateOriginalInput({silent:t}),e.refreshState(),e.showInput(),e.trigger("clear"))},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length);0===e?this.$control.prepend(t):C(this.$control[0].childNodes[e]).before(t),this.setCaret(e+1)},deleteSelection:function(t){var e,i,s,o,n,r,a,l,c,h=this;if(s=t&&8===t.keyCode?-1:1,o=p(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(a=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),n=[],h.$activeItems.length){for(c=h.$control.children(".active:"+(0<s?"last":"first")),r=h.$control.children(":not(input)").index(c),0<s&&r++,e=0,i=h.$activeItems.length;e<i;e++)n.push(C(h.$activeItems[e]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(s<0&&0===o.start&&0===o.length?n.push(h.items[h.caretPos-1]):0<s&&o.start===h.$control_input.val().length&&n.push(h.items[h.caretPos]));if(!n.length||"function"==typeof h.settings.onDelete&&!1===h.settings.onDelete.apply(h,[n]))return!1;for(void 0!==r&&h.setCaret(r);n.length;)h.removeItem(n.pop());return h.showInput(),h.positionDropdown(),h.refreshOptions(!0),a&&((l=h.getOption(a)).length&&h.setActiveOption(l)),!0},advanceSelection:function(t,e){var i,s,o,n,r,a=this;0!==t&&(a.rtl&&(t*=-1),i=0<t?"last":"first",s=p(a.$control_input[0]),a.isFocused&&!a.isInputHidden?(n=a.$control_input.val().length,(t<0?0!==s.start||0!==s.length:s.start!==n)||n||a.advanceCaret(t,e)):(r=a.$control.children(".active:"+i)).length&&(o=a.$control.children(":not(input)").index(r),a.setActiveItem(null),a.setCaret(0<t?o+1:o)))},advanceCaret:function(t,e){var i,s,o=this;0!==t&&(i=0<t?"next":"prev",o.isShiftDown?(s=o.$control_input[i]()).length&&(o.hideInput(),o.setActiveItem(s),e&&e.preventDefault()):o.setCaret(o.caretPos+t))},setCaret:function(t){var e,i,s,o,n=this;if(t="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,t)),!n.isPending)for(e=0,i=(s=n.$control.children(":not(input)")).length;e<i;e++)o=C(s[e]).detach(),e<t?n.$control_input.before(o):n.$control.append(o);n.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.$control_input.prop("disabled",!1).prop("tabindex",t.tabIndex),t.isDisabled=!1,t.unlock()},destroy:function(){var t=this,e=t.eventNS,i=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),C(window).off(e),C(document).off(e),C(document.body).off(e),delete t.$input[0].selectize},render:function(t,e){var i,s,o="",n=!1,r=this;return"option"!==t&&"item"!==t||(n=!!(i=O(e[r.settings.valueField]))),n&&(c(r.renderCache[t])||(r.renderCache[t]={}),r.renderCache[t].hasOwnProperty(i))?r.renderCache[t][i]:(o=C(r.settings.render[t].apply(this,[e,a])),"option"===t||"option_create"===t?e[r.settings.disabledField]||o.attr("data-selectable",""):"optgroup"===t&&(s=e[r.settings.optgroupValueField]||"",o.attr("data-group",s),e[r.settings.disabledField]&&o.attr("data-disabled","")),"option"!==t&&"item"!==t||o.attr("data-value",i||""),n&&(r.renderCache[t][i]=o[0]),o[0])},clearCache:function(t){void 0===t?this.renderCache={}:delete this.renderCache[t]},canCreate:function(t){if(!this.settings.create)return!1;var e=this.settings.createFilter;return t.length&&("function"!=typeof e||e.apply(this,[t]))&&("string"!=typeof e||new RegExp(e).test(t))&&(!(e instanceof RegExp)||e.test(t))}}),h.count=0,h.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",searchInputType:"text",maxLength:null,mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},C.fn.selectize=function(o){var n=C.fn.selectize.defaults,d=C.extend({},n,o),p=d.dataAttr,u=d.labelField,f=d.valueField,m=d.disabledField,_=d.optgroupField,g=d.optgroupLabelField,v=d.optgroupValueField;return this.each(function(){if(!this.selectize){var t=C(this),e=this.tagName.toLowerCase(),i=t.attr("placeholder")||t.attr("data-placeholder");i||d.allowEmptyOption||(i=t.children('option[value=""]').text());var s={placeholder:i,options:[],optgroups:[],items:[]};"select"===e?function(t,r){r.searchInputType=t.prop("type"),r.maxLength=t.prop("maxlength");function a(t){var e=p&&t.attr(p);return"string"==typeof e&&e.length?JSON.parse(e):null}function l(t,e){t=C(t);var i=O(t.val());if(i||d.allowEmptyOption)if(h.hasOwnProperty(i)){if(e){var s=h[i][_];s?C.isArray(s)?s.push(e):h[i][_]=[s,e]:h[i][_]=e}}else{var o=a(t)||{};o[u]=o[u]||t.text(),o[f]=o[f]||i,o[m]=o[m]||t.prop("disabled"),o[_]=o[_]||e,h[i]=o,c.push(o),t.is(":selected")&&r.items.push(i)}}function e(t){var e,i,s,o,n;for((s=(t=C(t)).attr("label"))&&((o=a(t)||{})[g]=s,o[v]=s,o[m]=t.prop("disabled"),r.optgroups.push(o)),e=0,i=(n=C("option",t)).length;e<i;e++)l(n[e],s)}var i,s,o,n,c=r.options,h={};for(r.maxItems=t.attr("multiple")?null:1,i=0,s=(n=t.children()).length;i<s;i++)"optgroup"===(o=n[i].tagName.toLowerCase())?e(n[i]):"option"===o&&l(n[i])}(t,s):function(t,e){var i,s,o,n,r=t.attr(p);if(r)for(e.options=JSON.parse(r),i=0,s=e.options.length;i<s;i++)e.items.push(e.options[i][f]);else{var a=C.trim(t.val()||"");if(!d.allowEmptyOption&&!a.length)return;for(i=0,s=(o=a.split(d.delimiter)).length;i<s;i++)(n={})[u]=o[i],n[f]=o[i],e.options.push(n);e.items=o}}(t,s),new h(t,C.extend(!0,{},n,s,o))}})},C.fn.selectize.defaults=h.defaults,C.fn.selectize.support={validity:w},h.define("create_on_enter",function(){if("multi"===this.settings.mode){var e=this;this.onKeyUp=(i=e.onKeyUp,function(t){return 13===t.keyCode&&""!=this.$control_input.val().trim()&&e.createItem(this.$control_input.val()),i.apply(this,arguments)})}var i}),h.define("create_on_blur",function(){if("multi"===this.settings.mode){var e=this;this.onBlur=(i=e.onBlur,function(t){return""!=this.$control_input.val().trim()&&e.createItem(this.$control_input.val()),i.apply(this,arguments)})}var i}),h.define("drag_drop",function(t){if(!C.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var s=this;s.lock=(o=s.lock,function(){var t=s.$control.data("sortable");return t&&t.disable(),o.apply(s,arguments)}),s.unlock=(i=s.unlock,function(){var t=s.$control.data("sortable");return t&&t.enable(),i.apply(s,arguments)}),s.setup=(e=s.setup,function(){e.apply(this,arguments);var i=s.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:s.isLocked,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var t=s.$activeItems?s.$activeItems.slice():null,e=[];i.children("[data-value]").each(function(){e.push(C(this).attr("data-value"))}),s.setValue(e),s.setActiveItem(t)}})})}var e,i,o}),h.define("dropdown_direction",function(t){var r=this;this.positionDropdown=function(){var t=this.$control,e=this.$dropdown,i=function(){var t=r.$control,e=C(window),i=t.outerHeight(!1),s=t.offset().top-e.scrollTop();return{control:{height:i,above:s,below:e.height()-s-i},dropdown:{height:r.$dropdown.outerHeight(!1)}}}(),s=function(t){var e=r.settings.dropdownDirection;return"auto"===e&&(e=t.control.below>t.dropdown.height?"down":t.control.above>t.control.below?"up":"down"),e}(i);"up"===s?e.addClass("direction-up").removeClass("direction-down"):e.addClass("direction-down").removeClass("direction-up"),t.attr("data-dropdown-direction",s);var o,n="body"===this.settings.dropdownParent?t.offset():t.position();switch(s){case"up":n.top-=i.dropdown.height,i.dropdown.height>i.control.above&&(o=i.control.above-15);break;case"down":n.top+=i.control.height,i.dropdown.height>i.control.below&&(o=i.control.below-15)}o?this.$dropdown_content.css({"max-height":o}):this.$dropdown_content.css({"max-height":""}),this.$dropdown.css({width:t.outerWidth(),top:n.top,left:n.left})}}),h.define("dropdown_header",function(t){var e,i=this;t=C.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a></div></div>'}},t),i.setup=(e=i.setup,function(){e.apply(i,arguments),i.$dropdown_header=C(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)})}),h.define("infinite_scroll",function(t){var e,i=this,o=1;i.infinitescroll={onScroll:function(){if(i.$dropdown_content[0].scrollHeight-(i.$dropdown_content.scrollTop()+i.$dropdown_content.height())<300){var t=JSON.stringify({search:i.lastValue,page:o});i.$dropdown_content.off("scroll"),i.onSearchChange(t)}}},i.onFocus=(e=i.onFocus,function(){var t=JSON.stringify({search:i.lastValue,page:o});e.apply(i,arguments),i.onSearchChange(t)}),i.onKeyUp=function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var i=e.$control_input.val()||"";if(e.lastValue!==i){var s=JSON.stringify({search:i,page:o=1});e.lastValue=i,e.onSearchChange(s),e.refreshOptions(),e.clearOptions(),e.trigger("type",i)}},i.on("load",function(){o++,i.$dropdown_content.on("scroll",i.infinitescroll.onScroll)})}),h.define("no_results",function(t){var e,i,s,o,n=this;t=C.extend({message:"Nenhum resultado encontrado.",html:function(t){return'<div class="selectize-dropdown '+t.classNames+' dropdown-empty-message"><div class="selectize-dropdown-content">'+t.message+"</div></div>"}},t),n.displayEmptyResultsMessage=function(){this.$empty_results_container&&(this.$empty_results_container.css("top",this.$control.outerHeight()),this.$empty_results_container.show())},n.refreshOptions=(o=n.refreshOptions,function(){o.apply(n,arguments),this.$empty_results_container&&(this.hasOptions||""==this.lastQuery?this.$empty_results_container.hide():this.displayEmptyResultsMessage())}),n.onKeyDown=(s=n.onKeyDown,function(t){s.apply(n,arguments),27===t.keyCode&&this.$empty_results_container.hide()}),n.onBlur=(i=n.onBlur,function(){this.$empty_results_container&&(i.apply(n,arguments),this.$empty_results_container.hide())}),n.setup=(e=n.setup,function(){e.apply(n,arguments),n.$empty_results_container=C(t.html(C.extend({classNames:n.$input.attr("class")},t))),n.$empty_results_container.insertBefore(n.$dropdown),n.$empty_results_container.hide()})}),h.define("optgroup_columns",function(a){var n,l=this;a=C.extend({equalizeWidth:!0,equalizeHeight:!0},a),this.getAdjacentOption=function(t,e){var i=t.closest("[data-group]").find("[data-selectable]"),s=i.index(t)+e;return 0<=s&&s<i.length?i.eq(s):C()},this.onKeyDown=(n=l.onKeyDown,function(t){var e,i,s,o;return!this.isOpen||37!==t.keyCode&&39!==t.keyCode?n.apply(this,arguments):(l.ignoreHover=!0,e=(o=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((i=(s=(o=37===t.keyCode?o.prev("[data-group]"):o.next("[data-group]")).find("[data-selectable]")).eq(Math.min(s.length-1,e))).length&&this.setActiveOption(i)))});function t(){var t,e,i,s,o,n,r;if((e=(r=C("[data-group]",l.$dropdown_content)).length)&&l.$dropdown_content.width()){if(a.equalizeHeight){for(t=i=0;t<e;t++)i=Math.max(i,r.eq(t).height());r.css({height:i})}a.equalizeWidth&&(n=l.$dropdown_content.innerWidth()-c(),s=Math.round(n/e),r.css({width:s}),1<e&&(o=n-s*(e-1),r.eq(e-1).css({width:o})))}}var c=function(){var t,e=c.width,i=document;return void 0===e&&((t=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',t=t.firstChild,i.body.appendChild(t),e=c.width=t.offsetWidth-t.clientWidth,i.body.removeChild(t)),e};(a.equalizeHeight||a.equalizeWidth)&&(r.after(this,"positionDropdown",t),r.after(this,"refreshOptions",t))}),h.define("remove_button",function(t){t=C.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i,s,o,n,r;"single"!==this.settings.mode?(n=i=this,r='<a href="javascript:void(0)" class="'+(s=t).className+'" tabindex="-1" title="'+a(s.title)+'">'+s.label+"</a>",i.setup=(o=n.setup,function(){if(s.append){var e=n.settings.render.item;n.settings.render.item=function(t){return function(t,e){var i=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,i)+e+t.substring(i)}(e.apply(i,arguments),r)}}o.apply(i,arguments),i.$control.on("click","."+s.className,function(t){if(t.preventDefault(),!n.isLocked){var e=C(t.currentTarget).parent();n.setActiveItem(e),n.deleteSelection()&&n.setCaret(n.items.length)}})})):function(i,s){s.className="remove-single";var o,n=i,r='<a href="javascript:void(0)" class="'+s.className+'" tabindex="-1" title="'+a(s.title)+'">'+s.label+"</a>";i.setup=(o=n.setup,function(){if(s.append){var t=C(n.$input.context).attr("id"),e=(C("#"+t),n.settings.render.item);n.settings.render.item=function(t){return function(t,e){return C("<span>").append(t).append(e)}(e.apply(i,arguments),r)}}o.apply(i,arguments),i.$control.on("click","."+s.className,function(t){t.preventDefault(),n.isLocked||n.clear()})})}(this,t)}),h.define("restore_on_backspace",function(s){var o,t=this;s.text=s.text||function(t){return t[this.settings.labelField]},this.onKeyDown=(o=t.onKeyDown,function(t){var e,i;return 8===t.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(e=this.caretPos-1)&&e<this.items.length?(i=this.options[this.items[e]],this.deleteSelection(t)&&(this.setTextboxValue(s.text.apply(this,[i])),this.refreshOptions(!0)),void t.preventDefault()):o.apply(this,arguments)})}),h});